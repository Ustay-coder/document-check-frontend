# UI Spec: ì„œë¥˜ ê²€í†  íŒŒì¼ ì—…ë¡œë“œ UI

## 1. ê°œìš”

FastAPI ì„œë¥˜ ê²€í†  APIë¥¼ ìœ„í•œ **íŒŒì¼ ì—…ë¡œë“œ ë°©ì‹ ì›¹ UI**.
íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìë™ ë¶„ì„ í›„ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” ë‹¨ìˆœí•œ ì¸í„°í˜ì´ìŠ¤.

### 1.1 v1 Chat UIì—ì„œ ë³€ê²½í•œ ì´ìœ 

v1ì€ ë””ìŠ¤ì½”ë“œ/ChatGPT ìŠ¤íƒ€ì¼ì˜ ëŒ€í™”í˜•(Chat) UIì˜€ë‹¤. `st.chat_input`ìœ¼ë¡œ í…ìŠ¤íŠ¸ì™€ íŒŒì¼ì„ ë™ì‹œì— ì…ë ¥í•˜ëŠ” êµ¬ì¡°.

**ë¬¸ì œì :**
- ì‚¬ìš©ìì˜ ì‹¤ì œ ì›Œí¬í”Œë¡œìš°ëŠ” "íŒŒì¼ ì˜¬ë¦¬ê³  ê²°ê³¼ í™•ì¸" â€” ëŒ€í™”ê°€ ì•„ë‹˜
- ì±„íŒ… íŒ¨ëŸ¬ë‹¤ì„ì´ ë¶ˆí•„ìš”í•œ ë§ˆì°°ì„ ë§Œë“¦ (ë©”ì‹œì§€ ì…ë ¥ ê°•ì œ, ëŒ€í™” ì´ë ¥ ê´€ë¦¬ ë“±)
- í›„ì† ì§ˆë¬¸ ê¸°ëŠ¥(`/chat`)ì€ MVPì—ì„œ ì œì™¸ëœ ìƒíƒœë¼ ì±„íŒ… UIì˜ ì´ì ì´ ì—†ìŒ
- ìƒíƒœ ê´€ë¦¬ê°€ ë©”ì‹œì§€ ë°°ì—´ ê¸°ë°˜ì´ë¼ ë³µì¡ (ë©”ì‹œì§€ íƒ€ì…ë³„ ë¶„ê¸°, ê²°ê³¼ ì¬ë Œë”ë§ ë“±)

**ê°€ì„¤:**
> ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹¨ìˆœí•œ íŒŒì¼ ì—…ë¡œë“œ + ê²°ê³¼ í™”ë©´ìœ¼ë¡œ êµì²´í•˜ë©´,
> ì‚¬ìš©ìê°€ ë” ë¹ ë¥´ê²Œ ì‘ì—…ì„ ì™„ë£Œí•˜ê³  UI ì½”ë“œë„ ë‹¨ìˆœí•´ì§„ë‹¤.

**ë³€ê²½ ë°©ì•ˆ:**
- `st.chat_input` â†’ `st.file_uploader` + ë²„íŠ¼ìœ¼ë¡œ êµì²´
- ë©”ì‹œì§€ ì´ë ¥ ê¸°ë°˜ ìƒíƒœ â†’ 4-state ìƒíƒœ ë¨¸ì‹  (`idle` â†’ `processing` â†’ `result` | `error`)
- `chat.py` ì»´í¬ë„ŒíŠ¸ ì‚­ì œ, `api_client.chat()` ë©”ì„œë“œ ì œê±°
- ê¸°ì¡´ `progress.py`, `result_card.py` ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©

### 1.2 ê¸°ìˆ  ìŠ¤íƒ

- **Streamlit** (Python ë‹¨ì¼ íŒŒì¼)
- `st.file_uploader(accept_multiple_files=True)` â€” ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ
- FastAPI ì„œë²„ì™€ HTTP í†µì‹  (httpx)

---

## 2. í™”ë©´ êµ¬ì„±

4-state ìƒíƒœ ë¨¸ì‹  ê¸°ë°˜ ë ˆì´ì•„ì›ƒ:

### 2.1 idle ìƒíƒœ â€” íŒŒì¼ ì—…ë¡œë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ì„œë¥˜ ê²€í†  AI                        [âš™ï¸ ì„¤ì •] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â”Œâ”€ íŒŒì¼ ì—…ë¡œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                            â”‚  â”‚
â”‚  â”‚  ê²€í† í•  ì„œë¥˜ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”                    â”‚  â”‚
â”‚  â”‚                                            â”‚  â”‚
â”‚  â”‚  Drag and drop files here                  â”‚  â”‚
â”‚  â”‚  [Browse files]                            â”‚  â”‚
â”‚  â”‚                                            â”‚  â”‚
â”‚  â”‚  PDF, JPG, JPEG, PNG                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚  3ê°œ íŒŒì¼ ì„ íƒë¨                                   â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ê²€í†  ì‹œì‘                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 processing ìƒíƒœ â€” ì§„í–‰ ì¤‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ì„œë¥˜ ê²€í†  AI                        [âš™ï¸ ì„¤ì •] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  ğŸ“‹ 3ê±´ ê²€í†  ì§„í–‰ ì¤‘... (phase2_group)             â”‚
â”‚                                                  â”‚
â”‚  Phase 1: ì „ì²˜ë¦¬          âœ… ì™„ë£Œ                 â”‚
â”‚  Phase 2: OCR + ê²€í†       ğŸ”„ 2/3 ê·¸ë£¹             â”‚
â”‚  Phase 3: êµì°¨ê²€ì¦         â³ ëŒ€ê¸°                 â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 result ìƒíƒœ â€” ê²€í†  ì™„ë£Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ì„œë¥˜ ê²€í†  AI                        [âš™ï¸ ì„¤ì •] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  âœ… ê²€í† ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!                          â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€ ê²€í†  ê²°ê³¼ ìš”ì•½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ âœ… í†µê³¼: 6   âš ï¸ ì£¼ì˜: 2   âŒ ì˜¤ë¥˜: 1      â”‚    â”‚
â”‚  â”‚                                          â”‚    â”‚
â”‚  â”‚ Toothy ìì‚¬ëª° êµ¬ì¶• ì™¸ì£¼ìš©ì—­               â”‚    â”‚
â”‚  â”‚ ì˜¬ë¦¼ â†’ ì‚¬ë¼ë””ìì¸ / 1,290,000ì›           â”‚    â”‚
â”‚  â”‚                                          â”‚    â”‚
â”‚  â”‚ âŒ ì´ì²´ê¸ˆì•¡ 58,050ì› ì´ˆê³¼                  â”‚    â”‚
â”‚  â”‚ âŒ í†µì¥ì‚¬ë³¸ ë¯¸ì œì¶œ                         â”‚    â”‚
â”‚  â”‚ âš ï¸ ê±°ë˜ëª…ì„¸ì„œ ê³µê¸‰ë°›ëŠ”ì ë¯¸ê¸°ì¬             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                  â”‚
â”‚  [ğŸ“„ ë¬¸ì„œë³„ ìƒì„¸]  [ğŸ”€ êµì°¨ê²€ì¦]                    â”‚
â”‚                                                  â”‚
â”‚  [ğŸ“¥ JSON ë‹¤ìš´ë¡œë“œ]    ğŸ’° $0.72 Â· â± 95ì´ˆ          â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ìƒˆ ê²€í†  ì‹œì‘                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 error ìƒíƒœ â€” ì˜¤ë¥˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ ì„œë¥˜ ê²€í†  AI                        [âš™ï¸ ì„¤ì •] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  âŒ API í˜¸ì¶œ ì‹¤íŒ¨: Connection refused              â”‚
â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              ë‹¤ì‹œ ì‹œë„                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ìƒíƒœ ë¨¸ì‹ 

```
         íŒŒì¼ ì—…ë¡œë“œ + "ê²€í†  ì‹œì‘" í´ë¦­
idle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º processing
  â–²                                        â”‚
  â”‚                                        â”œâ”€â”€ ì™„ë£Œ â†’ result
  â”‚                                        â”œâ”€â”€ ì‹¤íŒ¨ â†’ error
  â”‚                                        â””â”€â”€ API ì˜¤ë¥˜ â†’ error
  â”‚
  â”œâ”€â”€ "ìƒˆ ê²€í†  ì‹œì‘" (result ìƒíƒœì—ì„œ)
  â””â”€â”€ "ë‹¤ì‹œ ì‹œë„" (error ìƒíƒœì—ì„œ)
```

| ìƒíƒœ | UI í‘œì‹œ | ì „í™˜ ì¡°ê±´ |
|---|---|---|
| `idle` | íŒŒì¼ ì—…ë¡œë” + "ê²€í†  ì‹œì‘" ë²„íŠ¼ | íŒŒì¼ ì„ íƒ í›„ ë²„íŠ¼ í´ë¦­ â†’ `processing` |
| `processing` | ì§„í–‰ ìƒí™© í‘œì‹œ (í´ë§) | ì™„ë£Œ â†’ `result`, ì‹¤íŒ¨ â†’ `error` |
| `result` | ê²°ê³¼ ì¹´ë“œ + "ìƒˆ ê²€í†  ì‹œì‘" ë²„íŠ¼ | ë²„íŠ¼ í´ë¦­ â†’ `idle` |
| `error` | ì—ëŸ¬ ë©”ì‹œì§€ + "ë‹¤ì‹œ ì‹œë„" ë²„íŠ¼ | ë²„íŠ¼ í´ë¦­ â†’ `idle` |

---

## 4. ì¸í„°ë™ì…˜ íë¦„

### 4.1 ê¸°ë³¸ íë¦„: ì„œë¥˜ ê²€í† 

```
ì‚¬ìš©ì: íŒŒì¼ Nê°œ ì„ íƒ (drag & drop ë˜ëŠ” browse)
  â†“
UI: "{N}ê°œ íŒŒì¼ ì„ íƒë¨" í‘œì‹œ
  â†“
ì‚¬ìš©ì: "ê²€í†  ì‹œì‘" í´ë¦­
  â†“
UI: API í˜¸ì¶œ POST /api/reviews (multipart)
  â†“
UI: state â†’ processing, ì§„í–‰ ìƒí™© í‘œì‹œ
  â†“
UI: 2ì´ˆë§ˆë‹¤ GET /api/reviews/{id} í´ë§ â†’ ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
  â†“
API ì™„ë£Œ â†’ state â†’ result, ê²°ê³¼ ì¹´ë“œ í‘œì‹œ
```

### 4.2 ìƒˆ ê²€í† 

```
ì‚¬ìš©ì: "ìƒˆ ê²€í†  ì‹œì‘" í´ë¦­
  â†“
UI: state â†’ idle, uploader_key ì¦ê°€ë¡œ íŒŒì¼ ì—…ë¡œë” ì´ˆê¸°í™”
  â†“
ì‚¬ìš©ì: ìƒˆ íŒŒì¼ ì—…ë¡œë“œ â†’ ë°˜ë³µ
```

### 4.3 ì—ëŸ¬ ë³µêµ¬

```
API ì˜¤ë¥˜ ë˜ëŠ” ê²€í†  ì‹¤íŒ¨ ë°œìƒ
  â†“
UI: state â†’ error, ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
  â†“
ì‚¬ìš©ì: "ë‹¤ì‹œ ì‹œë„" í´ë¦­
  â†“
UI: state â†’ idle, ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘
```

---

## 5. ìƒì„¸ ì»´í¬ë„ŒíŠ¸

### 5.1 ê²°ê³¼ ìš”ì•½ ì¹´ë“œ (`result_card.py`)

```python
with st.container(border=True):
    col1, col2, col3 = st.columns(3)
    col1.metric("âœ… í†µê³¼", summary["passed"])
    col2.metric("âš ï¸ ì£¼ì˜", summary["warnings"])
    col3.metric("âŒ ì˜¤ë¥˜", summary["failures"])

    st.caption(summary["opinion"])

    for issue in summary["critical_issues"]:
        st.error(issue)
    for action in summary["action_required"]:
        st.warning(action)
```

### 5.2 ë¬¸ì„œë³„ ìƒì„¸ (í™•ì¥)

`st.expander` ì•ˆì— ë¬¸ì„œë³„ ì¶”ì¶œ ë°ì´í„° í…Œì´ë¸” + ì²´í¬ë¦¬ìŠ¤íŠ¸:

```python
with st.expander("ğŸ“„ ë¬¸ì„œë³„ ìƒì„¸", expanded=False):
    for doc in documents:
        icon = STATUS_ICONS[doc["status"]]
        st.subheader(f"{icon} {doc['doc_type']} ({doc['filename']})")

        # ì¶”ì¶œ ë°ì´í„°
        st.dataframe(extracted_data_df, use_container_width=True, hide_index=True)

        # ì²´í¬ë¦¬ìŠ¤íŠ¸
        for item in doc["checklist"]:
            st.write(f"{icon} **{item['item']}**: {item['value']}")
            if item.get("note"):
                st.caption(f"  â†³ {item['note']}")
```

### 5.3 êµì°¨ê²€ì¦ (í™•ì¥)

```python
with st.expander("ğŸ”€ êµì°¨ê²€ì¦", expanded=True):
    for item in cross_validation:
        icon = STATUS_ICONS[item["status"]]
        st.write(f"{icon} **{item['check_type']}**: {item['description']}")
        if item.get("details"):
            st.caption(f"  â†³ {item['details']}")
```

### 5.4 ì§„í–‰ ìƒí™© í‘œì‹œ (`progress.py`)

`st.empty()` placeholderë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸:

```python
placeholder = st.empty()

while True:
    data = client.get_review(review_id)

    if data["status"] == "completed":
        return data
    if data["status"] == "failed":
        return data   # callerê°€ error ì¶”ì¶œ

    # ì§„í–‰ ìƒí™© ë Œë”ë§
    with placeholder.container():
        st.info(f"ğŸ“‹ {file_count}ê±´ ê²€í†  ì§„í–‰ ì¤‘...")
        # Phase 1/2/3 ìƒíƒœ í‘œì‹œ

    time.sleep(2)
```

---

## 6. ì‚¬ì´ë“œë°”

```
â”Œâ”€â”€â”€ âš™ï¸ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               â”‚
â”‚  API Server                   â”‚
â”‚  [http://localhost:8000     ] â”‚
â”‚                               â”‚
â”‚  [ğŸ”Œ ì—°ê²° í…ŒìŠ¤íŠ¸]               â”‚
â”‚  âœ… ì—°ê²°ë¨ (ok)                â”‚
â”‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚
â”‚  [ğŸ—‘ï¸ ì´ˆê¸°í™”]                   â”‚
â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- "ì´ˆê¸°í™”" ë²„íŠ¼: ëª¨ë“  review ìƒíƒœ ì´ˆê¸°í™” + `uploader_key` ì¦ê°€ë¡œ íŒŒì¼ ì—…ë¡œë” ë¦¬ì…‹

---

## 7. API ì—°ë™

### 7.1 ì—”ë“œí¬ì¸íŠ¸ ë§¤í•‘

| UI ë™ì‘ | API í˜¸ì¶œ |
|---|---|
| "ê²€í†  ì‹œì‘" í´ë¦­ | `POST /api/reviews` (multipart) |
| ì§„í–‰ ìƒí™© í´ë§ | `GET /api/reviews/{id}` (2ì´ˆ ê°„ê²©) |
| JSON ë‹¤ìš´ë¡œë“œ | ë¡œì»¬ (API ì‘ë‹µ ì €ì¥ë³¸) |

### 7.2 APIClient ë©”ì„œë“œ

```python
class APIClient:
    def health_check() -> dict        # GET /health
    def create_review(files) -> dict   # POST /api/reviews
    def get_review(review_id) -> dict  # GET /api/reviews/{id}
    def list_reviews() -> dict         # GET /api/reviews (ë¯¸ë˜ ì‚¬ìš©)
    def delete_review(review_id) -> dict  # DELETE /api/reviews/{id} (ë¯¸ë˜ ì‚¬ìš©)
```

---

## 8. ìƒíƒœ ê´€ë¦¬

```python
# st.session_state
{
    "review_state": "idle",        # idle | processing | result | error
    "review_id": None,             # í˜„ì¬ ê²€í†  ID
    "review_result": None,         # ì™„ë£Œëœ ê²€í†  ê²°ê³¼ dict
    "review_usage": None,          # ì‚¬ìš©ëŸ‰ í†µê³„
    "review_error": None,          # ì—ëŸ¬ ë©”ì‹œì§€
    "file_count": 0,               # ì—…ë¡œë“œëœ íŒŒì¼ ìˆ˜
    "uploader_key": 0,             # file_uploader ë¦¬ì…‹ìš© ì¹´ìš´í„°
    "api_url": "http://localhost:8000",
}
```

`_reset_state()` í—¬í¼: ëª¨ë“  review í‚¤ ì´ˆê¸°í™” + `uploader_key` ì¦ê°€.

`uploader_key`ë¥¼ `st.file_uploader`ì˜ `key` íŒŒë¼ë¯¸í„°ì— ì‚¬ìš©í•˜ì—¬, ê°’ì´ ë°”ë€” ë•Œ Streamlitì´ ìœ„ì ¯ì„ ìƒˆë¡œ ìƒì„±í•˜ë„ë¡ ê°•ì œí•œë‹¤. ì´ë¥¼ í†µí•´ "ìƒˆ ê²€í†  ì‹œì‘" ì‹œ ì´ì „ íŒŒì¼ ì„ íƒì´ ì‚¬ë¼ì§„ë‹¤.

---

## 9. íŒŒì¼ êµ¬ì¡°

```
ui/
â”œâ”€â”€ app.py                  â€” Streamlit ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ (ìƒíƒœ ë¨¸ì‹ )
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ result_card.py      â€” ê²€í†  ê²°ê³¼ ì¹´ë“œ (ìš”ì•½/ìƒì„¸/êµì°¨ê²€ì¦)
â”‚   â”œâ”€â”€ progress.py         â€” ì§„í–‰ ìƒí™© í´ë§ + í‘œì‹œ
â”‚   â””â”€â”€ sidebar.py          â€” ì‚¬ì´ë“œë°” (ì„¤ì • + ì´ˆê¸°í™”)
â”œâ”€â”€ api_client.py           â€” FastAPI í†µì‹  í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ requirements.txt        â€” streamlit, httpx
```

ì‹¤í–‰:
```bash
pip install -r ui/requirements.txt
streamlit run ui/app.py
```

---

## 10. í˜„ì¬ êµ¬í˜„ ë²”ìœ„

### í¬í•¨ (v2 â€” íŒŒì¼ ì—…ë¡œë“œ UI)
- [x] íŒŒì¼ ì—…ë¡œë“œ + "ê²€í†  ì‹œì‘" ë²„íŠ¼
- [x] 4-state ìƒíƒœ ë¨¸ì‹  (idle/processing/result/error)
- [x] ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í‘œì‹œ (Phase 1/2/3)
- [x] ê²€í†  ê²°ê³¼ ìš”ì•½ ì¹´ë“œ
- [x] ë¬¸ì„œë³„ ìƒì„¸ / êµì°¨ê²€ì¦ í™•ì¥ ë³´ê¸°
- [x] JSON ë‹¤ìš´ë¡œë“œ
- [x] API ì„¤ì • (ì‚¬ì´ë“œë°”)
- [x] ì´ˆê¸°í™” ë²„íŠ¼
- [x] "ìƒˆ ê²€í†  ì‹œì‘" / "ë‹¤ì‹œ ì‹œë„" ì „í™˜

### ì œì™¸ (í–¥í›„)
- [ ] ê²€í†  ì´ë ¥ ì‚¬ì´ë“œë°”
- [ ] PDF ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ
- [ ] ì´ë¯¸ì§€ íŒŒì¼ ì„¬ë„¤ì¼ í”„ë¦¬ë·°
- [ ] ë‹¤í¬ ëª¨ë“œ
- [ ] ë°°ì¹˜ ê²€í†  (ì—¬ëŸ¬ ê±´ ë™ì‹œ)
